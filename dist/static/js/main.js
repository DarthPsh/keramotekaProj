"use strict";document.addEventListener("DOMContentLoaded",function(){function t(){0<$(".header-content__cart .header-content-circle__badge").val()?$(".header-content__cart .header-content-circle__badge").addClass("header-content-circle__badge_active"):$(".header-content__cart .header-content-circle__badge").removeClass("header-content-circle__badge_active"),$(".header-bot-mobile-item__cart").on("click",function(){$(".cart-count").val()<=0&&(preventDefault(),$(".cart-empty__drop-menu").toggleClass("cart-empty__drop-menu_active"))}),$(".header-content__cart").on("click",function(){preventDefault()}),$(".header-content__cart").on("mouseenter",function(){$(".cart-count").val()<=0&&$(".cart-empty__drop-menu").addClass("cart-empty__drop-menu_active")}),$(".header-content__cart").on("mouseleave",function(){$(".cart-count").val()<=0&&$(".cart-empty__drop-menu").removeClass("cart-empty__drop-menu_active")})}console.log("hello"),$('a[href^="tel:"]').attr("href",function(e,t){return t.replace(/\(/g,"").replace(/\)/g,"").replace(/\ /g,"").replace(/\-/g,"")}),$('input[type="tel"]').inputmask("+7(999)999-9999"),$(document).ajaxSuccess(function(){$('input[type="tel"]').inputmask("+7 (999) 999-99-99")}),$(".alert-close").on("click",function(){$(this).closest(".alert").hide()}),$(".page-content-grid-sizer").show(),$(".header-bot-mobile-phone").on("click",function(){$(".header-mobile-phone-drop-menu").toggleClass("header-mobile-phone-drop-menu_active")}),0<$(".header-content__favourites .header-content-circle__badge").val()?$(".header-content__favourites .header-content-circle__badge").addClass("header-content-circle__badge_active"):$(".header-content__favourites .header-content-circle__badge").removeClass("header-content-circle__badge_active"),$(".header-bot-mobile-item__favourites").on("click",function(){$(".favourites-count").val()<=0&&(preventDefault(),$(".favourites-empty__drop-menu").toggleClass("favourites-empty__drop-menu_active"))}),$(".header-content__favourites").on("click",function(){preventDefault()}),$(".header-content__favourites").on("mouseenter",function(){$(".header-content__favourites .header-content-circle__badge").val()<=0&&$(".favourites-empty__drop-menu").addClass("favourites-empty__drop-menu_active")}),$(".header-content__favourites").on("mouseleave",function(){$(".header-content__favourites .header-content-circle__badge").val()<=0&&$(".favourites-empty__drop-menu").removeClass("favourites-empty__drop-menu_active")}),t(),$("body").on("click",".add-to-cart",function(){preventDefault(),$.ajax({url:"/static/ajax/data.json",data:{count:$(this).closest(".product-card").find(".quantity-num").val(),product_id:$(this).closest(".product-card").data("product-id")}}).done(function(e){0<e.data_count&&($(".cart-count").val(e.data_count),t())}).fail(function(e){console.log(e),console.log("Failed")}).always(function(){})}),$("#search-input").focusin(function(){$(".header-bot-search__input").addClass("header-bot-search__input_active"),$(".header-bot-filter").addClass("header-bot-filter_active"),$(".header-bot-search").addClass("header-bot-search_active"),$(".header-bot-search__icon").addClass("header-bot-search__icon_active"),""!==$(".header-bot-search__input").val()&&$(".bx_searche").addClass("bx_searche_active")}),$("#search-input").focusout(function(){""!==$(".header-bot-search__input").val()?(console.log("что-то есть"),$(".header-bot-search__input").addClass("header-bot-search__input-border_active"),$(".header-bot-search__icon").addClass("header-bot-search__icon_active")):($(".header-bot-search__input").removeClass("header-bot-search__input-border_active"),$(".header-bot-search__icon").removeClass("header-bot-search__icon_active")),$(".header-bot-search__input").removeClass("header-bot-search__input_active"),setTimeout(function(){$(".header-bot-search").removeClass("header-bot-search_active"),$(".header-bot-filter").removeClass("header-bot-filter_active")},300),$(".bx_searche").removeClass("bx_searche_active")}),$(".header-bot-search__clear").on("click",function(){$(".header-bot-search__clear").removeClass("header-bot-search__clear_active"),$(".header-bot-search__input").removeClass("header-bot-search__input-border_active"),$(".header-bot-search__icon").removeClass("header-bot-search__icon_active")}),$(".header-bot-filter").on("click",function(){$(".header-filter").toggleClass("header-filter_active"),$(".header-bot-filter").toggleClass("header-bot-filter_triangle")}),$(".header-filter-list-item").each(function(e,t){$(this).children(".header-filter-list-item__title").on("click",function(){$(this).parent().find(".header-filter-list-drop-menu").hasClass("header-filter-list-drop-menu_active")?$(this).parent().find(".header-filter-list-drop-menu").removeClass("header-filter-list-drop-menu_active"):($(".header-filter-list-drop-menu").removeClass("header-filter-list-drop-menu_active"),$(this).parent().find(".header-filter-list-drop-menu").addClass("header-filter-list-drop-menu_active"))})}),$(document).mouseup(function(e){0===$(".header-filter-list-item").has(e.target).length&&$(".header-filter-list-drop-menu").removeClass("header-filter-list-drop-menu_active")}),$(".header-filter .header-filter-list-item .header-filter-list-drop-menu input").on("click",function(){$(".header-filter .header-filter-list-drop-menu").each(function(e){$(this).parent().find(".filter-list-count").text($(this).find('input[type="checkbox"]:checked').length),$(this).parent().find(".filter-list-count").text()<="0"?$(this).parent().find(".filter-list-count").css("opacity","0"):$(this).parent().find(".filter-list-count").css("opacity","1")})}),$('.header-filter input[type="checkbox"]').on("click",function(){$("#result span").html($("#controls input:checkbox:checked").length);var e=$('.header-filter input[type="checkbox"]:checked').length;0<e?($(".header-filter-submit").addClass("header-filter-submit_active"),$(".header-filter-reset").addClass("header-filter-reset_active"),$(".header-filter-checked").addClass("header-filter-checked_active"),$(".header-filter-btns").addClass("header-filter-btns_active")):($(".header-filter-submit").removeClass("header-filter-submit_active"),$(".header-filter-reset").removeClass("header-filter-reset_active"),$(".header-filter-checked").removeClass("header-filter-checked_active"),$(".header-filter-btns").removeClass("header-filter-btns_active")),console.log(e)}),$('.header-filter button[type="reset"]').on("click",function(){$(".header-filter-submit").removeClass("header-filter-submit_active"),$(".header-filter-reset").removeClass("header-filter-reset_active"),$(".filter-list-count").css("opacity","0"),$(".header-filter-checked").removeClass("header-filter-checked_active"),$(".header-filter-btns").removeClass("header-filter-btns_active")}),$(".header-bot-search__input").on("input",function(){var e=$(this).val();console.log(e),$.ajax({url:"search-res.html",responseData:{searchvalue:e}}).done(function(e){$(".bx_searche").addClass("bx_searche_active"),$(".header-bot-search .bx_searche").append(e)}).fail(function(){console.log("Failed")}).always(function(){""==$(".header-bot-search__input").val()?(console.log("пусто"),$(".bx_searche").removeClass("bx_searche_active"),$(".header-bot-search__clear").removeClass("header-bot-search__clear_active")):(console.log("ГУСТО"),$(".header-bot-search__input").addClass("header-bot-search__input_active"),$(".header-bot-search__clear").addClass("header-bot-search__clear_active"))})});var o=$(".page-content-grid").masonry({columnWidth:".page-content-grid-sizer",itemSelector:".page-content-grid-item",horizontalOrder:!0,resize:!0,percentPosition:!0,initLayout:!1,gutter:8});o.masonry("on","layoutComplete",function(){console.log("layout is complete")}),o.imagesLoaded(function(){o.masonry()}),$("body").on("click",".card-collection__name",function(){preventDefault(),$(this).parent().parent().toggleClass("card-collection_active"),setTimeout(function(){o.masonry()},150)}),$("body").on("click",".card-brand__count-title",function(){var t=this;$(".page-content-grid").hasClass("page-content-list")?(console.log("НЕТ НУЖНОГО КЛАССА"),$(this).closest(".card-brand").find(".card-brand__max").removeClass("card-brand__max_active"),setTimeout(function(){$(t).closest(".card-brand").find(".card-brand__min").show();var e=$(".page-content-grid").masonry({itemSelector:".page-content-grid-item",horizontalOrder:!0,resize:!0,percentPosition:!0,initLayout:!1,gutter:8});e.masonry("on","layoutComplete",function(){console.log("layout is complete")}),e.imagesLoaded(function(){e.masonry()})},300)):($(this).closest(".card-brand-content").toggleClass("card-brand_active"),setTimeout(function(){o.masonry()},150))}),$("body").on("click",".card-brand__min",function(){$(this).hide(),$(this).next().addClass("card-brand__max_active"),$(this).next().find(".card-brand-content").addClass("card-brand_active"),c(),setTimeout(function(){var e=$(".page-content-grid").masonry({itemSelector:".page-content-grid-item",horizontalOrder:!0,resize:!0,percentPosition:!0,initLayout:!1,gutter:8});e.masonry("on","layoutComplete",function(){console.log("layout is complete")}),e.imagesLoaded(function(){e.masonry()})},150)});var a=0;$(window).on("scroll",function(){var e=$(this).scrollTop();a<e&&1e3<e?(console.log("вниз ниже 1000"),$(".header-bot").removeClass("header-fixed_active"),$(".header-filter").removeClass("header-filter_active-fixed")):a<e&&500<e?(console.log("вниз ниже 500"),console.log(e),$(".header-bot").addClass("header-fixed")):a<e?console.log("вниз ниже 0"):e<a&&1e3<e?(console.log("вверх ниже 1000"),$(".header-bot").addClass("header-fixed_active"),$(".header-filter").addClass("header-filter_active-fixed")):e<a&&500<e?(console.log("вверх выше 1000 и ниже 500"),$(".header-bot").removeClass("header-fixed_active"),$(".header-filter").removeClass("header-filter_active-fixed")):(console.log("вверх"),$(".header-bot").removeClass("header-fixed")),a=e}),document.querySelectorAll(".page-slider").length&&new Swiper(".page-slider",{pagination:{el:".page-slider-pagination",clickable:!0},navigation:{nextEl:".page-slider-next",prevEl:".page-slider-prev"}}),$(".header-burger").on("click",function(){$(".header-burger").toggleClass("header-burger_active"),$(".mobile-menu").toggleClass("mobile-menu_active"),$(".header-bot-mobile-item-desc").toggleClass("header-bot-mobile-item-desc_active"),$(".header-bot").toggleClass("header-bot_active")}),$(".header-bot-mobile-item-search").on("click",function(){$(".header-bot-mobile-item").hide(),$(".header-bot-search").css({display:"flex"}),$(".header-bot-search__input").css({"max-width":"100%"}),$(".header-bot-mobile-search-close").show()}),$(".header-bot-mobile-search-close").on("click",function(){$(".header-bot-mobile-item").show(),$(".header-bot-search").css({display:"none"}),$(".header-bot-search__input").css({"max-width":"282px"}),$(".header-bot-mobile-search-close").hide()}),$(".mobile-menu-list-item .header-top__more").on("click",function(){$(this).siblings($(".mobile-menu-list-drop")).toggleClass("mobile-menu-list-drop_active")}),$(".mobile-menu-list-item__btn").on("click",function(){$(".header-filter").addClass("header-filter_active"),$(".header").addClass("header_overflow"),$("body").css("overflow","hidden")}),$(".header-filter-head__close").on("click",function(){$(".header-filter").removeClass("header-filter_active"),$(".header").removeClass("header_overflow"),$("body").css("overflow","")});var i=lozad();i.observe(),$(".product-text__content-read-more").on("click",function(){$(".product-text__content-read-more").toggleClass("product-text__content-read-more_active")});var e=new Swiper(".threed-slider__thumbs",{spaceBetween:5,slidesPerView:"auto",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{760:{spaceBetween:8,slidesPerView:5,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0}}});new Swiper(".threed-slider__main",{spaceBetween:10,thumbs:{swiper:e},pagination:{el:".threed-slider__main-pagination",type:"fraction"}});function n(){$(".quantity-arrow-minus").click(function(){1<$(this).closest(".quantity-block").find(".quantity-num").val()&&$(this).closest(".quantity-block").find(".quantity-num").val($(this).closest(".quantity-block").find(".quantity-num").val()-1)}),$(".quantity-arrow-plus").click(function(){$(this).closest(".quantity-block").find(".quantity-num").val(+$(this).closest(".quantity-block").find(".quantity-num").val()+1)})}function c(){var o=new Swiper(".page-card-img",{effect:"fade",pagination:{el:".page-card-img-pagination",clickable:!0}});$(".page-card-img-hover li").on("mouseenter",function(){var e=$(this).parent().parent(),t=$(".page-card-img").index(e),e=$(this).parent().children().index(this);o[t].slideTo(e)})}function r(){$(".calculation-popup__form").validate({ignore:"",submitHandler:function(e){var t,o,a;$(e).hasClass("ajax-form")?(t=new FormData(e),0!=$(e).find("[type=file]").length&&(a=(o=$(e).find("[type=file]")[0]).files[0],t.append(o.name,a),$.ajax({type:$(e).attr("method"),url:$(e).attr("action"),data:$(e).serialize()}).done(function(){console.log("success"),$(".calculation-popup-wrap").remove(),$.ajax({url:"form-ok.html"}).done(function(e){$("body").append(e),$("body").on("click",".calculation-popup__ok-close",function(){$(".calculation-popup-wrap").remove(),$("body").css("overflow","auto")})}).fail(function(){console.log("Failed")}).always(function(){})}).fail(function(){console.log("fail")}))):e.submit()}})}document.querySelectorAll(".product-slider").length&&(e=new Swiper(".product-slider-thumbs",{lazy:!0,spaceBetween:5,slidesPerView:7,freeMode:!0,loopedSlides:1,watchSlidesVisibility:!0,watchSlidesProgress:!0,direction:"horizontal",breakpoints:{761:{freeMode:!0,slidesPerView:7,spaceBetween:8,watchSlidesVisibility:!0,watchSlidesProgress:!0},1441:{freeMode:!0,spaceBetween:16,direction:"vertical",watchSlidesVisibility:!0,watchSlidesProgress:!0}}}),new Swiper(".product-slider-main",{lazy:{loadPrevNext:!0},loopedSlides:1,navigation:{nextEl:".product-slider-main-next",prevEl:".product-slider-main-prev"},thumbs:{swiper:e},pagination:{el:".product-slider-thumbs-pagination",type:"fraction"}})),n(),$(".pager-more").on("click",function(){preventDefault();var e=$(this).data("page-next");null!=e&&(console.log(e),$.ajax({url:"main-page-list.html",data:{PAGEN_1:e}}).done(function(e){console.log("ok"),$(".page-content-grid").append($(e).find(".page-content-grid-item")),$(".pager").replaceWith($(e).find(".pager")),o.masonry("reloadItems"),o.imagesLoaded(function(){o.masonry()}),c(),i.observe()}).fail(function(){console.log("Failed")}).always(function(){}))}),$(".pager-content a").on("click",function(){preventDefault(),$.ajax({url:"main-page-list.html"}).done(function(e){console.log("ok"),$(".page-content").replaceWith(e);var t=$(".page-content-grid").masonry({itemSelector:".page-content-grid-item",horizontalOrder:!0,resize:!0,percentPosition:!0,initLayout:!1,gutter:8});t.masonry("on","layoutComplete",function(){console.log("layout is complete")}),t.imagesLoaded(function(){t.masonry()}),i.observe()}).fail(function(){console.log("Failed")}).always(function(){})}),c(),$(".cta").on("click",function(){preventDefault(),$.ajax({url:"calculation-form.html"}).done(function(e){$("body").css("overflow","hidden"),$("body").append(e),r()}).fail(function(){console.log("Failed")}).always(function(){})}),$("body").on("change",".calculation-popup__footer-download input",function(){this.files[0]&&(document.querySelector(".calculation-popup__footer-loaded .file-name").innerText=this.files[0].name,document.querySelector(".calculation-popup__footer-loaded").style.opacity="1"),document.querySelector(".calculation-popup__footer-loaded .svg-sprite-icon").addEventListener("click",function(){document.querySelector(".calculation-popup__footer-download input").value="",/safari/i.test(navigator.userAgent)||(document.querySelector(".calculation-popup__footer-download input").type="",document.querySelector(".calculation-popup__footer-download input").type="file"),document.querySelector(".calculation-popup__footer-loaded .file-name").innerText="",document.querySelector(".calculation-popup__footer-loaded").style.opacity="0"})}),$("body").on("click",".calculation-popup__close",function(){$(".calculation-popup-wrap").remove(),$("body").css("overflow","auto"),history.replaceState({page:1}," "," ")}),$(".view-list").on("click",function(){preventDefault(),$.ajax({url:"catalog-list.html"}).done(function(e){console.log("ok"),$(".page-content").replaceWith(e);var t=$(".page-content-grid").masonry({itemSelector:".page-content-grid-item",horizontalOrder:!0,resize:!0,percentPosition:!0,initLayout:!1,gutter:8});t.masonry("on","layoutComplete",function(){console.log("layout is complete")}),t.imagesLoaded(function(){t.masonry()}),i.observe()}).fail(function(){console.log("Failed")}).always(function(){})}),$(".catalog-content__top-list .header-filter-list-item .header-filter-list-drop-menu input").on("click",function(){$(".catalog-content__top-list .header-filter-list-drop-menu").each(function(e){$(this).parent().find(".filter-list-count").text($(this).find('input[type="checkbox"]:checked').length),$(this).parent().find(".filter-list-count").text()<="0"?$(this).parent().find(".filter-list-count").css("opacity","0"):$(this).parent().find(".filter-list-count").css("opacity","1")})}),$(".catalog-content__top-filter button").on("click",function(){$(".catalog-content__top-list").addClass("catalog-content__top-list_active")}),$(".catalog-content__top-title .svg-sprite-icon").on("click",function(){$(".catalog-content__top-list").removeClass("catalog-content__top-list_active")}),$('.catalog-content__top-list input[type="checkbox"]').on("click",function(){console.log($('.catalog-content__top-list input[type="checkbox"]:checked').length),$(".catalog-content__top-filter button span").text(" ("+$('.catalog-content__top-list input[type="checkbox"]:checked').length+")")}),$(".catalog-filter-reset").on("click",function(){$(".catalog-content__top-filter button span").text(""),$(".catalog-content__top-list .filter-list-count").css("opacity","0")}),document.querySelectorAll(".information-main__link").length&&window.addEventListener("scroll",function(e){var o=window.scrollY;document.querySelectorAll(".information-main__link").forEach(function(e){var t=document.querySelector(e.hash);t.offsetTop<=o&&t.offsetTop+t.offsetHeight>o?e.classList.add("information-main__link_active"):e.classList.remove("information-main__link_active")})});var l,s=null;function d(e){$(window).innerWidth()<=760&&(!s||e?s=new Swiper(".scrollbar-slider",{slidesPerView:"auto",freeMode:!0}):console.log(s))}function u(){$(".popup-contact__tab").on("click",function(){$(".popup-contact__tab").removeClass("popup-contact__tab_active"),$(this).addClass("popup-contact__tab_active");var e=$(this).index();$(".popup-contact__content").removeClass("popup-contact__content_active"),$(".popup-contact__content:eq("+e+")").addClass("popup-contact__content_active")})}d(!1),$(window).on("resize",function(){d(!1)}),u(),$(".information-contact__block-btn").on("click",function(){preventDefault(),$.ajax({url:"contact-popup.html"}).done(function(e){$("body").css("overflow","hidden"),$("body").append(e),d(!0),u()}).fail(function(){console.log("Failed")}).always(function(){})}),document.querySelectorAll(".contacts-slider__main").length&&(l=new Swiper(".contacts-slider__thumbs",{lazy:!0,spaceBetween:5,slidesPerView:7,freeMode:!0,loopedSlides:10,watchSlidesVisibility:!0,watchSlidesProgress:!0,direction:"horizontal",breakpoints:{769:{direction:"vertical",spaceBetween:10,slidesPerView:4,freeMode:!0,loopedSlides:4,watchSlidesVisibility:!0,watchSlidesProgress:!0},1200:{direction:"vertical",spaceBetween:10,slidesPerView:5,freeMode:!0,loopedSlides:5,watchSlidesVisibility:!0,watchSlidesProgress:!0}}})),document.querySelectorAll(".contacts-slider__main").length&&new Swiper(".contacts-slider__main",{lazy:!0,spaceBetween:10,pagination:{el:".contacts-slider__main-pagination",type:"fraction"},thumbs:{swiper:l}}),$(".product-card-img").on("click",function(){$.ajax({url:"product-popup.html"}).done(function(e){$("body").css("overflow","hidden"),$("body").append(e),n(),zoom()}).fail(function(){console.log("Failed")}).always(function(){})}),$(".cart-reset__all").on("click",function(){$(".cart-list__item").remove()}),$(".cart-list__item").on("click",".cart-list__item-remove",function(){var e=this;$(this).parent().css("opacity","0"),setTimeout(function(){$(e).parent().remove()},300)}),document.querySelectorAll(".recently-viewed").length&&new Swiper(".recently-viewed",{spaceBetween:8,slidesPerView:"auto",freeMode:!0,navigation:{nextEl:".recently-viewed-next",prevEl:".recently-viewed-prev"}}),$(".card-remove").on("click",function(){preventDefault(),$(this).closest(".page-content-grid-item").remove(),o.masonry(),console.log($(this).parent())}),$(".anchor-label").on("click",function(){console.log($(this)),$(this).addClass("anchor-label_active"),$(this).find(".anchor-label__block").addClass("anchor-label__block_active"),$(this).find(".icon-close_brs").addClass("anchor-label__close")}),$(".icon-close_brs").on("click",function(){var e=this;setTimeout(function(){$(e).parent().removeClass("anchor-label_active"),$(e).siblings(".anchor-label__block").removeClass("anchor-label__block_active"),$(e).removeClass("anchor-label__close")},100)}),$(".information-contact__block-btn").on("click",function(){preventDefault(),$.ajax({url:"contact-popup.html"}).done(function(e){$("body").css("overflow","hidden"),$("body").append(e),d(!0),u()}).fail(function(){console.log("Failed")}).always(function(){})}),$(".3d-visual").on("click",function(){preventDefault(),$.ajax({url:"3d.html"}).done(function(e){console.log("OK"),$("body").append(e),$("#popup").html(),history.pushState({page:1},"","#popup"),document.querySelectorAll(".threed-slider").length&&(e=new Swiper(".threed-slider__thumbs",{spaceBetween:5,slidesPerView:"auto",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{760:{spaceBetween:8,slidesPerView:5,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0}}}),new Swiper(".threed-slider__main",{spaceBetween:10,thumbs:{swiper:e},pagination:{el:".threed-slider__main-pagination",type:"fraction"}})),r()}).fail(function(){console.log("Failed")}).always(function(){})}),console.log("press F")});